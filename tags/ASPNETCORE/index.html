<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>标签: ASPNETCORE | 生活中的tree</title><meta name="author" content="大白"><meta name="copyright" content="大白"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="人不可能同时拥有青春和对青春的感受">
<meta property="og:type" content="website">
<meta property="og:title" content="生活中的tree">
<meta property="og:url" content="http://bootree.cn/tags/ASPNETCORE/index.html">
<meta property="og:site_name" content="生活中的tree">
<meta property="og:description" content="人不可能同时拥有青春和对青春的感受">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://bootree.cn/img/avatar.png">
<meta property="article:author" content="大白">
<meta property="article:tag" content="hexo,butterfly,Blog,博客,大白">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://bootree.cn/img/avatar.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://bootree.cn/tags/ASPNETCORE/index.html"><link rel="preconnect" href="https://jsd.012700.xyz"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="NdIUXAOVyGnnBhcrip0ksCawbdAzT0hlBZDE9u4jx6k"/><meta name="msvalidate.01" content="567E47D75E8DCF1282B9623AD914701E"/><meta name="baidu-site-verification" content="code-pE5rnuxcfD"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://jsd.012700.xyz/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://jsd.012700.xyz/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":1,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":400},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":150,"languages":{"author":"作者: 大白","link":"链接: ","source":"来源: 生活中的tree","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://jsd.012700.xyz/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: true,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '标签: ASPNETCORE',
  isPost: false,
  isHome: false,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2024-09-22 21:01:39'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="preconnect" href="https://jsd.012700.xyz"><link href="/self/btf.css" rel="stylesheet"><link rel="alternate" href="/atom.xml" title="生活中的tree" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "/img/loading.gif" data-lazy-src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">62</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">16</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">19</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首頁</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-compass"></i><span> 目录</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-heartbeat"></i><span> 娱乐</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 图库</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="not-home-page" id="page-header" style="background-image: url('https://jsd.012700.xyz/gh/jerryc127/butterfly_cdn@2.1.0/top_img/tag.png')"><nav id="nav"><span id="blog-info"><a href="/" title="生活中的tree"><span class="site-name">生活中的tree</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首頁</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-compass"></i><span> 目录</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-heartbeat"></i><span> 娱乐</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 图库</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="page-site-info"><h1 id="site-title">ASPNETCORE</h1></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2024/08/29/ASP.NETCore/tutorials/13%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6/" title="13静态文件"><img class="post-bg" src= "/img/loading.gif" data-lazy-src="https://cnlicm-blog-image.oss-cn-shenzhen.aliyuncs.com/img/20240826134256.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="13静态文件"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/08/29/ASP.NETCore/tutorials/13%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6/" title="13静态文件">13静态文件</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-08-29T07:26:10.000Z" title="发表于 2024-08-29 15:26:10">2024-08-29</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C/">C#</a><i class="fas fa-angle-right article-meta-link"></i><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C/ASP-NET-Core/">ASP.NET Core</a></span></div><div class="content">&emsp;&emsp;默认情况下，静态文件（如 HTML、CSS、图像和 JavaScript）是 ASP.NET Core 应用直接提供给客户端的资产。
提供静态文件&emsp;&emsp;静态文件存储在项目的 Web 根目录中。 默认目录为 {content root}&#x2F;wwwroot，但可通过 UseWebRoot 方法更改目录。
&emsp;&emsp;采用 CreateBuilder 方法可将内容根目录设置为当前目录：
12345678910111213141516171819202122var builder = WebApplication.CreateBuilder(args);builder.Services.AddRazorPages();builder.Services.AddControllersWithViews();var app = builder.Build();if (!app.Environment.IsDevelopment())&#123;    app.UseExceptionHandler(&quot;/Error&quot;); ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2024/08/29/ASP.NETCore/tutorials/12%E5%8F%91%E5%87%BAHTTP%E8%AF%B7%E6%B1%82/" title="12发出HTTP请求"><img class="post-bg" src= "/img/loading.gif" data-lazy-src="https://cnlicm-blog-image.oss-cn-shenzhen.aliyuncs.com/img/20240826134256.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="12发出HTTP请求"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/08/29/ASP.NETCore/tutorials/12%E5%8F%91%E5%87%BAHTTP%E8%AF%B7%E6%B1%82/" title="12发出HTTP请求">12发出HTTP请求</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-08-29T07:25:21.000Z" title="发表于 2024-08-29 15:25:21">2024-08-29</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C/">C#</a><i class="fas fa-angle-right article-meta-link"></i><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C/ASP-NET-Core/">ASP.NET Core</a></span></div><div class="content">&emsp;&emsp;可以注册 IHttpClientFactory 并将其用于配置和创建应用中的 HttpClient 实例。 IHttpClientFactory 的优势如下：

提供一个中心位置，用于命名和配置逻辑 HttpClient 实例。 例如，可注册和配置名为 github 的客户端，使其访问 GitHub。 可以注册一个默认客户端用于一般性访问。
通过 HttpClient 中的委托处理程序来编码出站中间件的概念。 提供基于 Polly 的中间件的扩展，以利用 HttpClient 中的委托处理程序。
管理基础 HttpClientMessageHandler 实例的池和生存期。 自动管理可避免手动管理 HttpClient 生存期时出现的常见 DNS（域名系统）问题。
（通过 ILogger）添加可配置的记录体验，以处理工厂创建的客户端发送的所有请求。

消耗模式&emsp;&emsp;在应用中可以通过以下多种方式使用 IHttpClientFactory：

基本用法
命名客户端
类型化客户端
生成的客户端

基本用法&emsp;&emsp;通过在 Program ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2024/08/29/ASP.NETCore/tutorials/11%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/" title="11异常处理"><img class="post-bg" src= "/img/loading.gif" data-lazy-src="https://cnlicm-blog-image.oss-cn-shenzhen.aliyuncs.com/img/20240826134256.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="11异常处理"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/08/29/ASP.NETCore/tutorials/11%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/" title="11异常处理">11异常处理</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-08-29T06:07:23.000Z" title="发表于 2024-08-29 14:07:23">2024-08-29</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C/">C#</a><i class="fas fa-angle-right article-meta-link"></i><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C/ASP-NET-Core/">ASP.NET Core</a></span></div><div class="content">开发人员异常页&emsp;&emsp;“开发人员异常”页显示未经处理的请求异常的详细信息。 ASP.NET Core 应用在以下情况下默认启用开发人员异常页：

在开发环境中运行
使用当前模板创建的应用，即使用WebApplication.CreateBuilder。使用WebHost.CreateDefaultBuilder创建的应用必须通过在Configure中调用app.UseDeveloperExceptionPage来启用开发人员异常页。

&emsp;&emsp;开发人员异常页运行在中间件管道的前面部分，以便它能够捕获随后中间件中抛出的未经处理的异常。&emsp;&emsp;开发人员异常页可能包含关于异常和请求的以下信息：

堆栈跟踪
查询字符串参数（如果有）
Cookie（如果有）
标头

异常处理程序页&emsp;&emsp;若要为生产环境配置自定义错误处理页，请调用UseExceptionHandler.此异常处理中间件：

捕获并记录未经处理的异常
使用指示的路径在备用管道中重新执行请求。如果响应已启动，则不会重新执行请求。模板生成的代码使用**&#x2F;Erro ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2024/08/29/ASP.NETCore/tutorials/10%E8%B7%AF%E7%94%B1/" title="10路由"><img class="post-bg" src= "/img/loading.gif" data-lazy-src="https://cnlicm-blog-image.oss-cn-shenzhen.aliyuncs.com/img/20240826134256.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="10路由"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/08/29/ASP.NETCore/tutorials/10%E8%B7%AF%E7%94%B1/" title="10路由">10路由</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-08-29T06:07:07.000Z" title="发表于 2024-08-29 14:07:07">2024-08-29</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C/">C#</a><i class="fas fa-angle-right article-meta-link"></i><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C/ASP-NET-Core/">ASP.NET Core</a></span></div><div class="content">&emsp;&emsp;路由负责匹配传入的 HTTP 请求，然后将这些请求发送到应用的可执行终结点。 终结点是应用的可执行请求处理代码单元。 终结点在应用中进行定义，并在应用启动时进行配置。 终结点匹配过程可以从请求的 URL 中提取值，并为请求处理提供这些值。 通过使用应用中的终结点信息，路由还能生成映射到终结点的 URL。
&emsp;&emsp;应用可以使用以下内容配置路由：

Controller
Razor Pages
SignalR
gRPC
启用终结点的中间件，例如运行状况检查。
通过路由注册的委托和 Lambda。

路由基本知识以下代码演示路由的基本示例：
123456var builder = WebApplication.CreateBuilder(args);var app = builder.Build();app.MapGet(&quot;/&quot;, () =&gt; &quot;Hello World!&quot;);app.Run();

&emsp;&emsp;前面的示例包含使用 MapGet 方法的单个终结点：

当 HTTP GET 请求发送 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2024/08/29/ASP.NETCore/tutorials/09HttpContext/" title="09HttpContext"><img class="post-bg" src= "/img/loading.gif" data-lazy-src="https://cnlicm-blog-image.oss-cn-shenzhen.aliyuncs.com/img/20240826134256.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="09HttpContext"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/08/29/ASP.NETCore/tutorials/09HttpContext/" title="09HttpContext">09HttpContext</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-08-29T01:18:27.000Z" title="发表于 2024-08-29 09:18:27">2024-08-29</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C/">C#</a><i class="fas fa-angle-right article-meta-link"></i><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C/ASP-NET-Core/">ASP.NET Core</a></span></div><div class="content">&emsp;&emsp;HttpContext 封装了有关个别 HTTP 请求和响应的所有信息。 收到 HTTP 请求时，HttpContext 实例会进行初始化。 HttpContext 实例可通过中间件和应用框架（如 Web API 控制器、Razor Pages、SignalR、gRPC 等）访问。
HttpRequest&emsp;&emsp;HttpContext.Request 提供对 HttpRequest 的访问。 HttpRequest 包含有关传入 HTTP 请求的信息，并在服务器收到 HTTP 请求时被初始化。 HttpRequest 不是只读的，中间件可以在中间件管道中更改请求值。
HttPRequest常用成员




properties
说明
示例



HttpRequest.Path
请求路径
&#x2F;en&#x2F;article&#x2F;getstarted


HttpRequest.Method
请求方法
GET


HttpRequest.Headers
请求标头的集合
user-agent&#x3D;Edge x-custom- he ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2024/08/28/ASP.NETCore/tutorials/08%E7%9B%91%E8%A7%86/" title="08监视"><img class="post-bg" src= "/img/loading.gif" data-lazy-src="https://cnlicm-blog-image.oss-cn-shenzhen.aliyuncs.com/img/20240826134256.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="08监视"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/08/28/ASP.NETCore/tutorials/08%E7%9B%91%E8%A7%86/" title="08监视">08监视</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-08-28T10:05:37.000Z" title="发表于 2024-08-28 18:05:37">2024-08-28</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C/">C#</a><i class="fas fa-angle-right article-meta-link"></i><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C/ASP-NET-Core/">ASP.NET Core</a></span></div><div class="content">运行状况检查&emsp;&emsp;运行状况检查由应用程序作为 HTTP 终结点公开。 可以为各种实时监视方案配置运行状况检查终结点：

运行状况探测可以由容器业务流程协调程和负载均衡器用于检查应用的状态。 例如，容器业务流程协调程序可以通过停止滚动部署或重新启动容器来响应失败的运行状况检查。 负载均衡器可以通过将流量从失败的实例路由到正常实例，来应对不正常的应用。
可以监视内存、磁盘和其他物理服务器资源的使用情况来了解是否处于正常状态。
运行状况检查可以测试应用的依赖项（如数据库和外部服务终结点）以确认是否可用和正常工作。

&emsp;&emsp;运行状况检查通常与外部监视服务或容器业务流程协调程序一起用于检查应用的状态。 向应用添加运行状况检查之前，需确定要使用的监视系统。 监视系统决定了要创建的运行状况检查类型以及配置其终结点的方式。
基本运行状况探测&emsp;&emsp;对于许多应用，报告应用在处理请求方面的可用性（运行情况）的基本运行状况探测配置足以发现应用的状态。
&emsp;&emsp;基本配置会注册运行状况检查服务，并调用运行状况检查中间件以通过运行状况响应在 UR ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2024/08/28/ASP.NETCore/tutorials/07%E6%97%A5%E5%BF%97/" title="07日志"><img class="post-bg" src= "/img/loading.gif" data-lazy-src="https://cnlicm-blog-image.oss-cn-shenzhen.aliyuncs.com/img/20240826134256.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="07日志"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/08/28/ASP.NETCore/tutorials/07%E6%97%A5%E5%BF%97/" title="07日志">07日志</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-08-28T06:24:35.000Z" title="发表于 2024-08-28 14:24:35">2024-08-28</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C/">C#</a><i class="fas fa-angle-right article-meta-link"></i><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C/ASP-NET-Core/">ASP.NET Core</a></span></div><div class="content">日志记录提供程序&emsp;&emsp;日志记录提供程序存储日志，但显示日志的 Console 提供程序除外。 例如，Azure Application Insights 提供程序将日志存储在 Azure Application Insights 中。 可以启用多个提供程序。
&emsp;&emsp;默认 ASP.NET Core Web 应用模板调用 WebApplication.CreateBuilder，该操作将添加以下日志记录提供程序：

Console
Debug
EventSource
EventLog (仅限Windows)

&emsp;&emsp;下面的代码将重写由 WebApplication.CreateBuilder 添加的一组默认的日志记录提供程序：
LoggingConfigureLogging12345var builder = WebApplication.CreateBuilder(args);builder.Logging.ClearProviders();builder.Logging.AddConsole();123456var builder  ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2024/08/28/ASP.NETCore/tutorials/06%E9%80%89%E9%A1%B9%E6%A8%A1%E5%BC%8F/" title="06选项模式"><img class="post-bg" src= "/img/loading.gif" data-lazy-src="https://cnlicm-blog-image.oss-cn-shenzhen.aliyuncs.com/img/20240826134256.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="06选项模式"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/08/28/ASP.NETCore/tutorials/06%E9%80%89%E9%A1%B9%E6%A8%A1%E5%BC%8F/" title="06选项模式">06选项模式</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-08-28T03:38:59.000Z" title="发表于 2024-08-28 11:38:59">2024-08-28</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C/">C#</a><i class="fas fa-angle-right article-meta-link"></i><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C/ASP-NET-Core/">ASP.NET Core</a></span></div><div class="content">&emsp;&emsp;选项模式使用类来提供对相关设置组的强类型访问。 当配置设置由方案隔离到单独的类时，应用遵循两个重要软件工程原则：

封装：依赖于配置设置的类仅依赖于其使用的配置设置
分离关注点：应用的不同部件的设置不彼此依赖或相互耦合

绑定分层配置&emsp;&emsp;读取相关配置值的首选方法是使用选项模式。 例如，若要读取以下配置值，请执行以下操作：
appsettings.jsonPositionOptions通过Bind()方式通过Get()方式(推荐)123456&#123;    &quot;Position&quot;: &#123;        &quot;Title&quot;: &quot;Editor&quot;,        &quot;Name&quot;: &quot;Joe Smith&quot;    &#125;&#125;&emsp;&emsp;选项类：

必须是包含公共无参数构造函数的非抽象类。
类型的所有公共读写属性都已绑定。
字段不是绑定的。 在下面的代码中，Position 未绑定。 由于使用了 Position 字段，因此在将 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2024/08/28/ASP.NETCore/tutorials/05%E9%85%8D%E7%BD%AE/" title="05配置"><img class="post-bg" src= "/img/loading.gif" data-lazy-src="https://cnlicm-blog-image.oss-cn-shenzhen.aliyuncs.com/img/20240826134256.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="05配置"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/08/28/ASP.NETCore/tutorials/05%E9%85%8D%E7%BD%AE/" title="05配置">05配置</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-08-28T02:16:26.000Z" title="发表于 2024-08-28 10:16:26">2024-08-28</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C/">C#</a><i class="fas fa-angle-right article-meta-link"></i><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C/ASP-NET-Core/">ASP.NET Core</a></span></div><div class="content">&emsp;&emsp;ASP.NET Core中的应用程序配置是使用一个或多个配置提供程序执行的。配置提供程序使用各种配置源从键值对读取配置数据：

配置文件，例如appsettings.json
环境变量
Azure Key Vault
Azure 应用配置
命令行参数
已安装或已创建的自定义提供程序
目录文件
内存中的.NET对象

应用程序和主机配置&emsp;&emsp;ASP.NET Core 应用配置和启动“主机”。 主机负责应用程序启动和生存期管理。 ASP.NET Core 模板创建的 WebApplicationBuilder 包含主机。 虽然可以在主机和应用程序配置提供程序中完成一些配置，但通常，只有主机必需的配置才应在主机配置中完成。
默认应用程序配置源1var builder = WebApplication.CreateBuilder(args);

&emsp;&emsp;WebApplication.CreateBuilder 使用预配置的默认值初始化 WebApplicationBuilder 类的新实例。 经过初始化的 WebApplicationB ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2024/08/27/ASP.NETCore/tutorials/04%E4%B8%BB%E6%9C%BA/" title="04主机"><img class="post-bg" src= "/img/loading.gif" data-lazy-src="https://cnlicm-blog-image.oss-cn-shenzhen.aliyuncs.com/img/20240826134256.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="04主机"></a></div><div class="recent-post-info"><a class="article-title" href="/2024/08/27/ASP.NETCore/tutorials/04%E4%B8%BB%E6%9C%BA/" title="04主机">04主机</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2024-08-27T09:28:27.000Z" title="发表于 2024-08-27 17:28:27">2024-08-27</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C/">C#</a><i class="fas fa-angle-right article-meta-link"></i><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C/ASP-NET-Core/">ASP.NET Core</a></span></div><div class="content">配置相关URL&amp;Port设置端口&emsp;&emsp;Properties&#x2F;launchSettings.json 文件，该文件指定应用响应的端口。或通过如下方式：
12345var app = WebApplication.Create(args);app.MapGet(&quot;/&quot;, () =&gt; &quot;Hello World!&quot;);app.Run(&quot;http://localhost:3000&quot;);

设置多个端口&emsp;&emsp;在以下代码中，应用响应端口 3000 和 4000。
12345678var app = WebApplication.Create(args);app.Urls.Add(&quot;http://localhost:3000&quot;);app.Urls.Add(&quot;http://localhost:4000&quot;);app.MapGet(&quot;/&quot;, () =&gt; &quot;Hello World&quot;);app.Run();
 ...</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/tags/ASPNETCORE/page/2/">2</a><a class="extend next" rel="next" href="/tags/ASPNETCORE/page/2/"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "/img/loading.gif" data-lazy-src="/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">大白</div><div class="author-info__description">人不可能同时拥有青春和对青春的感受</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">62</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">16</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">19</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/cnlicm"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/cnlicm" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github" style="color: #hdhfbb;"></i></a><a class="social-icon" href="mailto:codenobugs@foxmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #000000;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">A lazy guy. My dream is that generate electricity with love.</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/09/22/ASP.NETCore/middlewares/SignalR%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%97%B6%E5%BA%94%E7%94%A8/" title="SignalR构建实时应用"><img src= "/img/loading.gif" data-lazy-src="https://cnlicm-blog-image.oss-cn-shenzhen.aliyuncs.com/img/20240922102508.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SignalR构建实时应用"/></a><div class="content"><a class="title" href="/2024/09/22/ASP.NETCore/middlewares/SignalR%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%97%B6%E5%BA%94%E7%94%A8/" title="SignalR构建实时应用">SignalR构建实时应用</a><time datetime="2024-09-22T02:01:13.000Z" title="发表于 2024-09-22 10:01:13">2024-09-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/09/21/Python/tutorials/01Python%E5%9F%BA%E7%A1%80/" title="01Python基础"><img src= "/img/loading.gif" data-lazy-src="https://cnlicm-blog-image.oss-cn-shenzhen.aliyuncs.com/img/20240921083632.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="01Python基础"/></a><div class="content"><a class="title" href="/2024/09/21/Python/tutorials/01Python%E5%9F%BA%E7%A1%80/" title="01Python基础">01Python基础</a><time datetime="2024-09-21T00:34:47.000Z" title="发表于 2024-09-21 08:34:47">2024-09-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/09/20/Tools/oh-my-posh%E7%BE%8E%E5%8C%96%E7%BB%88%E7%AB%AF/" title="oh-my-posh美化终端"><img src= "/img/loading.gif" data-lazy-src="https://cnlicm-blog-image.oss-cn-shenzhen.aliyuncs.com/img/20240920223143.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="oh-my-posh美化终端"/></a><div class="content"><a class="title" href="/2024/09/20/Tools/oh-my-posh%E7%BE%8E%E5%8C%96%E7%BB%88%E7%AB%AF/" title="oh-my-posh美化终端">oh-my-posh美化终端</a><time datetime="2024-09-20T14:21:00.000Z" title="发表于 2024-09-20 22:21:00">2024-09-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/09/04/Python/Python%E5%BA%93%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85/" title="Python库离线安装"><img src= "/img/loading.gif" data-lazy-src="https://cnlicm-blog-image.oss-cn-shenzhen.aliyuncs.com/img/20240904171053.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Python库离线安装"/></a><div class="content"><a class="title" href="/2024/09/04/Python/Python%E5%BA%93%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85/" title="Python库离线安装">Python库离线安装</a><time datetime="2024-09-04T08:34:34.000Z" title="发表于 2024-09-04 16:34:34">2024-09-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/09/03/ANSYS/ANSYS%E8%AE%A1%E7%AE%97/" title="ANSYS计算"><img src= "/img/loading.gif" data-lazy-src="https://jsd.012700.xyz/gh/jerryc127/CDN/img/material-7.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ANSYS计算"/></a><div class="content"><a class="title" href="/2024/09/03/ANSYS/ANSYS%E8%AE%A1%E7%AE%97/" title="ANSYS计算">ANSYS计算</a><time datetime="2024-09-03T03:23:37.000Z" title="发表于 2024-09-03 11:23:37">2024-09-03</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            
            </div>
            <ul class="card-category-list expandBtn" id="aside-cat-list">
            <li class="card-category-list-item parent"><a class="card-category-list-link" href="/categories/C/"><span class="card-category-list-name">C#</span><span class="card-category-list-count">41</span><i class="fas fa-caret-left "></i></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/C/ASP-NET-Core/"><span class="card-category-list-name">ASP.NET Core</span><span class="card-category-list-count">14</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/C/ASP-NET-Core/Middleware/"><span class="card-category-list-name">Middleware</span><span class="card-category-list-count">1</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/C/WPF/"><span class="card-category-list-name">WPF</span><span class="card-category-list-count">27</span></a></li></ul></li><li class="card-category-list-item parent"><a class="card-category-list-link" href="/categories/Embedded/"><span class="card-category-list-name">Embedded</span><span class="card-category-list-count">5</span><i class="fas fa-caret-left "></i></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Embedded/STC51/"><span class="card-category-list-name">STC51</span><span class="card-category-list-count">5</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Git/"><span class="card-category-list-name">Git</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Hexo/"><span class="card-category-list-name">Hexo</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item parent"><a class="card-category-list-link" href="/categories/IDE/"><span class="card-category-list-name">IDE</span><span class="card-category-list-count">1</span><i class="fas fa-caret-left "></i></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/IDE/JetBrainsRider/"><span class="card-category-list-name">JetBrainsRider</span><span class="card-category-list-count">1</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Linux/"><span class="card-category-list-name">Linux</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/MQTT/"><span class="card-category-list-name">MQTT</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item parent"><a class="card-category-list-link" href="/categories/PDMS/"><span class="card-category-list-name">PDMS</span><span class="card-category-list-count">4</span><i class="fas fa-caret-left "></i></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/PDMS/PML/"><span class="card-category-list-name">PML</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/PDMS/PML-NET/"><span class="card-category-list-name">PML.NET</span><span class="card-category-list-count">3</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Python/"><span class="card-category-list-name">Python</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item parent"><a class="card-category-list-link" href="/categories/Tool/"><span class="card-category-list-name">Tool</span><span class="card-category-list-count">1</span><i class="fas fa-caret-left "></i></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Tool/Cmd/"><span class="card-category-list-name">Cmd</span><span class="card-category-list-count">1</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Windows/"><span class="card-category-list-name">Windows</span><span class="card-category-list-count">1</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/Hexo/" style="font-size: 1.2em; color: rgb(49, 2, 182)">Hexo</a><a href="/tags/WindowsUpdate/" style="font-size: 1.15em; color: rgb(4, 56, 46)">WindowsUpdate</a><a href="/tags/Git/" style="font-size: 1.2em; color: rgb(67, 158, 44)">Git</a><a href="/tags/IDE/" style="font-size: 1.15em; color: rgb(51, 65, 5)">IDE</a><a href="/tags/Settings/" style="font-size: 1.15em; color: rgb(130, 152, 86)">Settings</a><a href="/tags/ASPNETCORE/" style="font-size: 1.4em; color: rgb(74, 190, 99)">ASPNETCORE</a><a href="/tags/Python/" style="font-size: 1.15em; color: rgb(54, 160, 108)">Python</a><a href="/tags/PDMS/" style="font-size: 1.3em; color: rgb(21, 83, 146)">PDMS</a><a href="/tags/PML-NET/" style="font-size: 1.25em; color: rgb(50, 101, 179)">PML.NET</a><a href="/tags/PML/" style="font-size: 1.15em; color: rgb(23, 5, 40)">PML</a><a href="/tags/JetBrainsRider/" style="font-size: 1.15em; color: rgb(79, 42, 8)">JetBrainsRider</a><a href="/tags/MQTT/" style="font-size: 1.15em; color: rgb(98, 152, 116)">MQTT</a><a href="/tags/51%E5%8D%95%E7%89%87%E6%9C%BA/" style="font-size: 1.35em; color: rgb(145, 108, 9)">51单片机</a><a href="/tags/WPF%E7%BC%96%E7%A8%8B%E5%AE%9D%E5%85%B8/" style="font-size: 1.45em; color: rgb(7, 31, 71)">WPF编程宝典</a><a href="/tags/PythonTutorials/" style="font-size: 1.15em; color: rgb(20, 103, 130)">PythonTutorials</a><a href="/tags/Middleware/" style="font-size: 1.15em; color: rgb(96, 136, 158)">Middleware</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/09/"><span class="card-archive-list-date">2024年09月</span><span class="card-archive-list-count">8</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/08/"><span class="card-archive-list-date">2024年08月</span><span class="card-archive-list-count">22</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/07/"><span class="card-archive-list-date">2024年07月</span><span class="card-archive-list-count">11</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/06/"><span class="card-archive-list-date">2024年06月</span><span class="card-archive-list-count">11</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/05/"><span class="card-archive-list-date">2024年05月</span><span class="card-archive-list-count">10</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">62</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2024-05-08T16:00:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">313.8k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2024-09-22T13:01:38.352Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://jsd.012700.xyz/gh/jerryc127/butterfly_cdn@2.1.0/top_img/tag.png')"><div id="footer-wrap"><div class="copyright">&copy;2024 By 大白</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text"><a target="_blank" rel="noopener external nofollow noreferrer" href="https://beian.miit.gov.cn/"><img class="icp-icon" src= "/img/loading.gif" data-lazy-src="/img/2020011362.png"><span>赣ICP备2020011362号-2</span></a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="https://jsd.012700.xyz/npm/hexo-theme-butterfly@4.13.0/source/js/utils.min.js"></script><script src="https://jsd.012700.xyz/npm/hexo-theme-butterfly@4.13.0/source/js/main.min.js"></script><script src="https://jsd.012700.xyz/npm/hexo-theme-butterfly@4.13.0/source/js/tw_cn.min.js"></script><script src="https://jsd.012700.xyz/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://jsd.012700.xyz/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://jsd.012700.xyz/npm/vanilla-lazyload@17.8.8/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaid.length === 0) return
  const runMermaid = () => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from($mermaid).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const loadMermaid = () => {
    window.loadMermaid ? runMermaid() : getScript('https://jsd.012700.xyz/npm/mermaid@10.8.0/dist/mermaid.min.js').then(runMermaid)
  }

  btf.addGlobalFn('themeChange', runMermaid, 'mermaid')

  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><script data-pjax src="/self/btf.js"></script><script defer="defer" id="ribbon" src="https://jsd.012700.xyz/npm/butterfly-extsrc@1.1.3/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="true" data-click="true"></script><script src="https://jsd.012700.xyz/npm/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"]):not([href="/talking/"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener
  btf.removeGlobalFnEvent('pjax')
  btf.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="https://jsd.012700.xyz/npm/hexo-theme-butterfly@4.13.0/source/js/search/local-search.min.js"></script></div></div></body></html>